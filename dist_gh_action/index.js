module.exports=function(e,t){"use strict";var n={};function __webpack_require__(t){if(n[t]){return n[t].exports}var r=n[t]={i:t,l:false,exports:{}};e[t].call(r.exports,r,r.exports,__webpack_require__);r.l=true;return r.exports}__webpack_require__.ab=__dirname+"/";function startup(){return __webpack_require__(860)}return startup()}({4:function(e,t,n){e.exports=function(e){var t=n(761);var r={chunkSize:(parseInt(e.length/1024)+1)*1024};return{deflate:function(){return t.deflateRawSync(e,r)},deflateAsync:function(n){var i=t.createDeflateRaw(r),o=[],s=0;i.on("data",function(e){o.push(e);s+=e.length});i.on("end",function(){var e=Buffer.alloc(s),t=0;e.fill(0);for(var r=0;r<o.length;r++){var i=o[r];i.copy(e,t);t+=i.length}n&&n(e)});i.end(e)}}}},26:function(e,t,n){var r=n(519).require(),i=n(622);r.existsSync=r.existsSync||i.existsSync;e.exports=function(){var e=[],t=n(589),o=n(799),s=i.sep;function mkdirSync(e){var t=e.split(s)[0];e.split(s).forEach(function(e){if(!e||e.substr(-1,1)===":")return;t+=s+e;var n;try{n=r.statSync(t)}catch(e){r.mkdirSync(t)}if(n&&n.isFile())throw o.FILE_IN_THE_WAY.replace("%s",t)})}function findSync(e,t,n){if(typeof t==="boolean"){n=t;t=undefined}var o=[];r.readdirSync(e).forEach(function(u){var c=i.join(e,u);if(r.statSync(c).isDirectory()&&n)o=o.concat(findSync(c,t,n));if(!t||t.test(c)){o.push(i.normalize(c)+(r.statSync(c).isDirectory()?s:""))}});return o}return{makeDir:function(e){mkdirSync(e)},crc32:function(t){if(typeof t==="string"){t=Buffer.alloc(t.length,t)}var n=Buffer.alloc(4);if(!e.length){for(var r=0;r<256;r++){var i=r;for(var o=8;--o>=0;)if((i&1)!==0){i=3988292384^i>>>1}else{i=i>>>1}if(i<0){n.writeInt32LE(i,0);i=n.readUInt32LE(0)}e[r]=i}}var s=0,u=0,c=t.length,f=~s;while(--c>=0)f=e[(f^t[u++])&255]^f>>>8;s=~f;n.writeInt32LE(s&4294967295,0);return n.readUInt32LE(0)},methodToString:function(e){switch(e){case t.STORED:return"STORED ("+e+")";case t.DEFLATED:return"DEFLATED ("+e+")";default:return"UNSUPPORTED ("+e+")"}},writeFileTo:function(e,t,n,o){if(r.existsSync(e)){if(!n)return false;var s=r.statSync(e);if(s.isDirectory()){return false}}var u=i.dirname(e);if(!r.existsSync(u)){mkdirSync(u)}var c;try{c=r.openSync(e,"w",438)}catch(t){r.chmodSync(e,438);c=r.openSync(e,"w",438)}if(c){try{r.writeSync(c,t,0,t.length,0)}catch(e){throw e}finally{r.closeSync(c)}}r.chmodSync(e,o||438);return true},writeFileToAsync:function(e,t,n,o,s){if(typeof o==="function"){s=o;o=undefined}r.exists(e,function(u){if(u&&!n)return s(false);r.stat(e,function(n,c){if(u&&c.isDirectory()){return s(false)}var f=i.dirname(e);r.exists(f,function(n){if(!n)mkdirSync(f);r.open(e,"w",438,function(n,i){if(n){r.chmod(e,438,function(){r.open(e,"w",438,function(n,i){r.write(i,t,0,t.length,0,function(){r.close(i,function(){r.chmod(e,o||438,function(){s(true)})})})})})}else{if(i){r.write(i,t,0,t.length,0,function(){r.close(i,function(){r.chmod(e,o||438,function(){s(true)})})})}else{r.chmod(e,o||438,function(){s(true)})}}})})})})},findFiles:function(e){return findSync(e,true)},getAttributes:function(e){},setAttributes:function(e){},toBuffer:function(e){if(Buffer.isBuffer(e)){return e}else{if(e.length===0){return Buffer.alloc(0)}return Buffer.from(e,"utf8")}},Constants:t,Errors:o}}()},87:function(e){e.exports=require("os")},208:function(e,t,n){var r=n(402);var i=r.FileSystem.require(),o=n(622);i.existsSync=i.existsSync||o.existsSync;var s=n(967),u=n(802);var c=/^win/.test(process.platform);e.exports=function(e){var t=undefined,n="";if(e&&typeof e==="string"){if(i.existsSync(e)){n=e;t=new u(e,r.Constants.FILE)}else{throw r.Errors.INVALID_FILENAME}}else if(e&&Buffer.isBuffer(e)){t=new u(e,r.Constants.BUFFER)}else{t=new u(null,r.Constants.NONE)}function sanitize(e,t){e=o.resolve(o.normalize(e));var n=t.split("/");for(var r=0,i=n.length;r<i;r++){var s=o.normalize(o.join(e,n.slice(r,i).join(o.sep)));if(s.indexOf(e)===0){return s}}return o.normalize(o.join(e,o.basename(t)))}function getEntry(e){if(e&&t){var n;if(typeof e==="string")n=t.getEntry(e);if(typeof e==="object"&&typeof e.entryName!=="undefined"&&typeof e.header!=="undefined")n=t.getEntry(e.entryName);if(n){return n}}return null}return{readFile:function(e){var t=getEntry(e);return t&&t.getData()||null},readFileAsync:function(e,t){var n=getEntry(e);if(n){n.getDataAsync(t)}else{t(null,"getEntry failed for:"+e)}},readAsText:function(e,t){var n=getEntry(e);if(n){var r=n.getData();if(r&&r.length){return r.toString(t||"utf8")}}return""},readAsTextAsync:function(e,t,n){var r=getEntry(e);if(r){r.getDataAsync(function(e,r){if(r){t(e,r);return}if(e&&e.length){t(e.toString(n||"utf8"))}else{t("")}})}else{t("")}},deleteFile:function(e){var n=getEntry(e);if(n){t.deleteEntry(n.entryName)}},addZipComment:function(e){t.comment=e},getZipComment:function(){return t.comment||""},addZipEntryComment:function(e,t){var n=getEntry(e);if(n){n.comment=t}},getZipEntryComment:function(e){var t=getEntry(e);if(t){return t.comment||""}return""},updateFile:function(e,t){var n=getEntry(e);if(n){n.setData(t)}},addLocalFile:function(e,t,n){if(i.existsSync(e)){if(t){t=t.split("\\").join("/");if(t.charAt(t.length-1)!=="/"){t+="/"}}else{t=""}var o=e.split("\\").join("/").split("/").pop();if(n){this.addFile(t+n,i.readFileSync(e),"",0)}else{this.addFile(t+o,i.readFileSync(e),"",0)}}else{throw r.Errors.FILE_NOT_FOUND.replace("%s",e)}},addLocalFolder:function(e,t,n){if(n===undefined){n=function(){return true}}else if(n instanceof RegExp){n=function(e){return function(t){return e.test(t)}}(n)}if(t){t=t.split("\\").join("/");if(t.charAt(t.length-1)!=="/"){t+="/"}}else{t=""}e=o.normalize(e);e=e.split("\\").join("/");if(e.charAt(e.length-1)!=="/")e+="/";if(i.existsSync(e)){var s=r.findFiles(e),u=this;if(s.length){s.forEach(function(r){var o=r.split("\\").join("/").replace(new RegExp(e.replace(/(\(|\))/g,"\\$1"),"i"),"");if(n(o)){if(o.charAt(o.length-1)!=="/"){u.addFile(t+o,i.readFileSync(r),"",0)}else{u.addFile(t+o,Buffer.alloc(0),"",0)}}})}}else{throw r.Errors.FILE_NOT_FOUND.replace("%s",e)}},addFile:function(e,n,r,i){var o=new s;o.entryName=e;o.comment=r||"";if(!i){if(o.isDirectory){i=16877<<16|16}else{i=420<<16}}o.attr=i;o.setData(n);t.setEntry(o)},getEntries:function(){if(t){return t.entries}else{return[]}},getEntry:function(e){return getEntry(e)},extractEntryTo:function(e,n,s,u){u=u||false;s=typeof s==="undefined"?true:s;var c=getEntry(e);if(!c){throw r.Errors.NO_ENTRY}var f=c.entryName;var a=sanitize(n,s?f:o.basename(f));if(c.isDirectory){a=o.resolve(a,"..");var l=t.getEntryChildren(c);l.forEach(function(e){if(e.isDirectory)return;var t=e.getData();if(!t){throw r.Errors.CANT_EXTRACT_FILE}var i=sanitize(n,s?e.entryName:o.basename(e.entryName));r.writeFileTo(i,t,u)});return true}var E=c.getData();if(!E)throw r.Errors.CANT_EXTRACT_FILE;if(i.existsSync(a)&&!u){throw r.Errors.CANT_OVERRIDE}r.writeFileTo(a,E,u);return true},test:function(){if(!t){return false}for(var e in t.entries){try{if(e.isDirectory){continue}var n=t.entries[e].getData();if(!n){return false}}catch(e){return false}}return true},extractAllTo:function(e,n){n=n||false;if(!t){throw r.Errors.NO_ZIP}t.entries.forEach(function(t){var o=sanitize(e,t.entryName.toString());if(t.isDirectory){r.makeDir(o);return}var s=t.getData();if(!s){throw r.Errors.CANT_EXTRACT_FILE}r.writeFileTo(o,s,n);try{i.utimesSync(o,t.header.time,t.header.time)}catch(e){throw r.Errors.CANT_EXTRACT_FILE}})},extractAllToAsync:function(e,n,s){if(!s){s=function(){}}n=n||false;if(!t){s(new Error(r.Errors.NO_ZIP));return}var u=t.entries;var c=u.length;u.forEach(function(t){if(c<=0)return;var u=o.normalize(t.entryName.toString());if(t.isDirectory){r.makeDir(sanitize(e,u));if(--c===0)s(undefined);return}t.getDataAsync(function(f,a){if(c<=0)return;if(a){s(new Error(a));return}if(!f){c=0;s(new Error(r.Errors.CANT_EXTRACT_FILE));return}r.writeFileToAsync(sanitize(e,u),f,n,function(n){try{i.utimesSync(o.resolve(e,u),t.header.time,t.header.time)}catch(e){s(new Error("Unable to set utimes"))}if(c<=0)return;if(!n){c=0;s(new Error("Unable to write"));return}if(--c===0)s(undefined)})})})},writeZip:function(e,i){if(arguments.length===1){if(typeof e==="function"){i=e;e=""}}if(!e&&n){e=n}if(!e)return;var o=t.compressToBuffer();if(o){var s=r.writeFileTo(e,o,true);if(typeof i==="function")i(!s?new Error("failed"):null,"")}},toBuffer:function(e,n,r,i){this.valueOf=2;if(typeof e==="function"){t.toAsyncBuffer(e,n,r,i);return null}return t.compressToBuffer()}}}},227:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function fulfilled(e){try{step(r.next(e))}catch(e){o(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())})};var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(Object.hasOwnProperty.call(e,n))t[n]=e[n];t["default"]=e;return t};Object.defineProperty(t,"__esModule",{value:true});const s=i(n(602));const u=o(n(622));const c=o(n(669));class MetaMfParser{constructor(e){this.mBasePath=e;this.mfFilePath=u.join(e,"META-INF","MANIFEST.MF");this.mFilesExtensionMap=new Map}parse(){return r(this,void 0,void 0,function*(){var e=c.promisify(s.default.eachLine);return e(this.mfFilePath,e=>{this.parseLine(e)})})}getFiles(e){return this.mFilesExtensionMap.get(e)}parseLine(e){if(!e.startsWith("Name: ")){return}const t=u.join(this.mBasePath,e.split("Name: ",2)[1]);const n=u.extname(t);if(!this.mFilesExtensionMap.has(n)){this.mFilesExtensionMap.set(n,[])}const r=this.mFilesExtensionMap.get(n);if(!c.isUndefined(r)){r.push(t)}}}t.default=MetaMfParser},285:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function fulfilled(e){try{step(r.next(e))}catch(e){o(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())})};var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(Object.hasOwnProperty.call(e,n))t[n]=e[n];t["default"]=e;return t};var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});const s=i(n(310));const u=o(n(400));const c=n(669);class GithubCiCore{getInput(e){const t=s.getInput(e);return c.isUndefined(t)?"":t}setOutput(e,t){return s.setOutput(e,t)}logInfo(e){return s.info(e)}logWarning(e){return s.warning(e)}logError(e){return s.error(e)}}t.GithubCiCore=GithubCiCore;class GithubActionRunner{run(){return r(this,void 0,void 0,function*(){try{const e=new GithubCiCore;const t=new u.default(e);yield t.run()}catch(e){s.setFailed(e.message)}})}}t.default=GithubActionRunner},304:function(e){e.exports=require("string_decoder")},310:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){function adopt(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function fulfilled(e){try{step(r.next(e))}catch(e){i(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){i(e)}}function step(e){e.done?n(e.value):adopt(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:true});const i=n(997);const o=n(87);const s=n(622);var u;(function(e){e[e["Success"]=0]="Success";e[e["Failure"]=1]="Failure"})(u=t.ExitCode||(t.ExitCode={}));function exportVariable(e,t){process.env[e]=t;i.issueCommand("set-env",{name:e},t)}t.exportVariable=exportVariable;function setSecret(e){i.issueCommand("add-mask",{},e)}t.setSecret=setSecret;function addPath(e){i.issueCommand("add-path",{},e);process.env["PATH"]=`${e}${s.delimiter}${process.env["PATH"]}`}t.addPath=addPath;function getInput(e,t){const n=process.env[`INPUT_${e.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!n){throw new Error(`Input required and not supplied: ${e}`)}return n.trim()}t.getInput=getInput;function setOutput(e,t){i.issueCommand("set-output",{name:e},t)}t.setOutput=setOutput;function setFailed(e){process.exitCode=u.Failure;error(e)}t.setFailed=setFailed;function debug(e){i.issueCommand("debug",{},e)}t.debug=debug;function error(e){i.issue("error",e)}t.error=error;function warning(e){i.issue("warning",e)}t.warning=warning;function info(e){process.stdout.write(e+o.EOL)}t.info=info;function startGroup(e){i.issue("group",e)}t.startGroup=startGroup;function endGroup(){i.issue("endgroup")}t.endGroup=endGroup;function group(e,t){return r(this,void 0,void 0,function*(){startGroup(e);let n;try{n=yield t()}finally{endGroup()}return n})}t.group=group;function saveState(e,t){i.issueCommand("save-state",{name:e},t)}t.saveState=saveState;function getState(e){return process.env[`STATE_${e}`]||""}t.getState=getState},351:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function fulfilled(e){try{step(r.next(e))}catch(e){o(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())})};var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(Object.hasOwnProperty.call(e,n))t[n]=e[n];t["default"]=e;return t};Object.defineProperty(t,"__esModule",{value:true});const o=i(n(747));class MarkdownReporter{writeReport(e,t){return r(this,void 0,void 0,function*(){var n="";n+=this.buildRow("Metric",e.baseApkLabel,e.targetApkLabel,"Difference");n+=this.buildRow("---","---","---","---");e.comparisionMetrics.forEach(e=>{n+=this.buildRow(e.metricName,String(e.baseValue),String(e.targetValue),String(e.difference))});return o.writeFileSync(t,n)})}buildRow(...e){return e.join(" | ")+" | \n"}}t.MarkdownReporter=MarkdownReporter},400:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function fulfilled(e){try{step(r.next(e))}catch(e){o(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())})};var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});const o=i(n(916));const s=i(n(615));const u=n(351);const c=i(n(633));class CiRunner{constructor(e){this.ciCore=e;this.thresholdChecker=new c.default(e)}run(){return r(this,void 0,void 0,function*(){const e=this.ciCore.getInput("baseAppPath");const t=this.ciCore.getInput("targetAppPath");const n=this.ciCore.getInput("baseAppLabel");const r=this.ciCore.getInput("targetAppLabel");const i=this.ciCore.getInput("summaryOutputPath");const c=this.ciCore.getInput("metrics");const f=this.ciCore.getInput("thresholds");var a=false;if(!e||!t){this.ciCore.logError("App paths not supplied!");a=true}if(!n||!r){this.ciCore.logError("App labels not supplied!");a=true}if(!i){this.ciCore.logError("Summary path not supplied!");a=true}if(!c){this.ciCore.logError("Must pick at least one metric!");a=true}const l=c.split(",");var E=[];try{E=this.parseThresholdsFromInput(f,l)}catch(e){this.ciCore.logError("Error parsing thresholds! "+e);a=true}if(a){throw"Invalid / illegal task inputs!"}const d=new o.default;const h=new u.MarkdownReporter;const g=new s.default(d,h);const m=yield g.generateComparisionReport(e,t,i,n,r,l,E);if(!this.thresholdChecker.checkThresholds(m)){throw"App size increased significantly in at least one metric!"}console.log(m);return m})}parseThresholdsFromInput(e,t){const n=[];if(!e){this.ciCore.logWarning("No thresholds supplied. Drastic changes in app size metrics will not fail this task!");t.forEach(()=>n.push(NaN));return n}const r=e.split(",");if(r.length!=t.length){throw"Thresholds must be set corresponding to each metric in metrics or none!"}t.forEach((e,t)=>{const i=parseInt(r[t]);n.push(i)});return n}}t.default=CiRunner},402:function(e,t,n){e.exports=n(26);e.exports.FileSystem=n(519);e.exports.Constants=n(589);e.exports.Errors=n(799);e.exports.FileAttr=n(718)},519:function(e,t,n){t.require=function(){var e=n(747);if(process.versions["electron"]){try{originalFs=n(533);if(Object.keys(originalFs).length>0){e=originalFs}}catch(e){}}return e}},533:function(){eval("require")("original-fs")},543:function(e,t,n){var r=n(402),i=r.Constants;e.exports=function(){var e=0,t=0,n=0,o=0,s=0;return{get diskEntries(){return e},set diskEntries(n){e=t=n},get totalEntries(){return t},set totalEntries(n){t=e=n},get size(){return n},set size(e){n=e},get offset(){return o},set offset(e){o=e},get commentLength(){return s},set commentLength(e){s=e},get mainHeaderSize(){return i.ENDHDR+s},loadFromBinary:function(u){if(u.length!==i.ENDHDR||u.readUInt32LE(0)!==i.ENDSIG)throw r.Errors.INVALID_END;e=u.readUInt16LE(i.ENDSUB);t=u.readUInt16LE(i.ENDTOT);n=u.readUInt32LE(i.ENDSIZ);o=u.readUInt32LE(i.ENDOFF);s=u.readUInt16LE(i.ENDCOM)},toBinary:function(){var r=Buffer.alloc(i.ENDHDR+s);r.writeUInt32LE(i.ENDSIG,0);r.writeUInt32LE(0,4);r.writeUInt16LE(e,i.ENDSUB);r.writeUInt16LE(t,i.ENDTOT);r.writeUInt32LE(n,i.ENDSIZ);r.writeUInt32LE(o,i.ENDOFF);r.writeUInt16LE(s,i.ENDCOM);r.fill(" ",i.ENDHDR);return r},toString:function(){return"{\n"+'\t"diskEntries" : '+e+",\n"+'\t"totalEntries" : '+t+",\n"+'\t"size" : '+n+" bytes,\n"+'\t"offset" : 0x'+o.toString(16).toUpperCase()+",\n"+'\t"commentLength" : 0x'+s+"\n"+"}"}}}},566:function(e,t,n){e.exports=function(e){var t=n(761);return{inflate:function(){return t.inflateRawSync(e)},inflateAsync:function(n){var r=t.createInflateRaw(),i=[],o=0;r.on("data",function(e){i.push(e);o+=e.length});r.on("end",function(){var e=Buffer.alloc(o),t=0;e.fill(0);for(var r=0;r<i.length;r++){var s=i[r];s.copy(e,t);t+=s.length}n&&n(e)});r.end(e)}}}},571:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});class ApkSizeSummary{constructor(){this.apkLabel="";this.sizeMetrics={}}}t.default=ApkSizeSummary},589:function(e){e.exports={LOCHDR:30,LOCSIG:67324752,LOCVER:4,LOCFLG:6,LOCHOW:8,LOCTIM:10,LOCCRC:14,LOCSIZ:18,LOCLEN:22,LOCNAM:26,LOCEXT:28,EXTSIG:134695760,EXTHDR:16,EXTCRC:4,EXTSIZ:8,EXTLEN:12,CENHDR:46,CENSIG:33639248,CENVEM:4,CENVER:6,CENFLG:8,CENHOW:10,CENTIM:12,CENCRC:16,CENSIZ:20,CENLEN:24,CENNAM:28,CENEXT:30,CENCOM:32,CENDSK:34,CENATT:36,CENATX:38,CENOFF:42,ENDHDR:22,ENDSIG:101010256,ENDSUB:8,ENDTOT:10,ENDSIZ:12,ENDOFF:16,ENDCOM:20,STORED:0,SHRUNK:1,REDUCED1:2,REDUCED2:3,REDUCED3:4,REDUCED4:5,IMPLODED:6,DEFLATED:8,ENHANCED_DEFLATED:9,PKWARE:10,BZIP2:12,LZMA:14,IBM_TERSE:18,IBM_LZ77:19,FLG_ENC:0,FLG_COMP1:1,FLG_COMP2:2,FLG_DESC:4,FLG_ENH:8,FLG_STR:16,FLG_LNG:1024,FLG_MSK:4096,FILE:0,BUFFER:1,NONE:2,EF_ID:0,EF_SIZE:2,ID_ZIP64:1,ID_AVINFO:7,ID_PFS:8,ID_OS2:9,ID_NTFS:10,ID_OPENVMS:12,ID_UNIX:13,ID_FORK:14,ID_PATCH:15,ID_X509_PKCS7:20,ID_X509_CERTID_F:21,ID_X509_CERTID_C:22,ID_STRONGENC:23,ID_RECORD_MGT:24,ID_X509_PKCS7_RL:25,ID_IBM1:101,ID_IBM2:102,ID_POSZIP:18064,EF_ZIP64_OR_32:4294967295,EF_ZIP64_OR_16:65535,EF_ZIP64_SUNCOMP:0,EF_ZIP64_SCOMP:8,EF_ZIP64_RHO:16,EF_ZIP64_DSN:24}},602:function(e,t,n){"use strict";var r=n(747),i=n(304).StringDecoder;function createLineReader(e,t,n){if(t instanceof Function){n=t;t=undefined}if(!t)t={};var r=t.encoding||"utf8",o=t.separator||/\r\n?|\n/,s=t.bufferSize||1024,u="",c=new i(r),f=false,a=false,l=-1,E,d,h=false,g;if(o instanceof RegExp){g=function(){var e=o.exec(u);if(e&&(e.index+e[0].length<u.length||a)){l=e.index;E=e[0].length}else{l=-1;E=0}}}else{E=o.length;g=function(){l=u.indexOf(o)}}function getReadStream(){return e}function close(t){if(!f){f=true;if(typeof e.close=="function"){e.close()}setImmediate(t)}}function onFailure(e){close(function(t){return n(e||t)})}function isOpen(){return!f}function isClosed(){return f}function waitForMoreToRead(e){if(h){e()}else{d=e}}function resumeDeferredRead(){if(d){d();d=null}}function read(t){waitForMoreToRead(function(){var n;try{n=e.read(s)}catch(e){t(e)}if(n){u+=c.write(n.slice(0,n.length))}else{h=false}t()})}function onStreamReadable(){h=true;resumeDeferredRead()}function onStreamEnd(){a=true;resumeDeferredRead()}e.on("readable",onStreamReadable);e.on("end",onStreamEnd);e.on("error",onFailure);function shouldReadMore(){g();return l<0&&!a}function callWhile(e,t,n){if(e()){t(function(r){if(r){n(r)}else{setImmediate(callWhile,e,t,n)}})}else{n()}}function readToSeparator(e){callWhile(shouldReadMore,read,e)}function hasNextLine(){return u.length>0||!a}function nextLine(e){if(f){return e(new Error("LineReader has been closed"))}function getLine(t){if(t){return e(t)}if(l<0&&a){l=u.length}var n=u.substring(0,l);u=u.substring(l+E);l=-1;e(undefined,n)}g();if(l<0){if(a){if(hasNextLine()){l=u.length;getLine()}else{return e(new Error("No more lines to read."))}}else{readToSeparator(getLine)}}else{getLine()}}readToSeparator(function(e){if(e){onFailure(e)}else{return n(undefined,{hasNextLine:hasNextLine,nextLine:nextLine,close:close,isOpen:isOpen,isClosed:isClosed,getReadStream:getReadStream})}})}function open(e,t,n){if(t instanceof Function){n=t;t=undefined}var i;if(typeof e.read=="function"){i=e}else if(typeof e==="string"||e instanceof String){i=r.createReadStream(e)}else{n(new Error("Invalid file argument for LineReader.open.  Must be filename or stream."));return}i.pause();createLineReader(i,t,n)}function eachLine(e,t,n,r){if(t instanceof Function){r=n;n=t;t=undefined}var i=n.length===3;var o;var s;open(e,t,function(e,t){o=t;if(s){s(t)}if(e){if(r)r(e);return}function finish(e){t.close(function(t){if(r)r(e||t)})}function newRead(){if(t.hasNextLine()){setImmediate(readNext)}else{finish()}}function continueCb(e){if(e!==false){newRead()}else{finish()}}function readNext(){t.nextLine(function(e,r){if(e){finish(e)}var o=!t.hasNextLine();if(i){n(r,o,continueCb)}else{if(n(r,o)!==false){newRead()}else{finish()}}})}newRead()});return{getReader:function(e){if(o){e(o)}else{s=e}}}}e.exports.open=open;e.exports.eachLine=eachLine},615:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function fulfilled(e){try{step(r.next(e))}catch(e){o(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())})};var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});const o=i(n(771));class ComparisionReportGenerator{constructor(e,t){this.apkAnalyser=e;this.reporter=t}generateComparisionReport(e,t,n,i,s,u,c){return r(this,void 0,void 0,function*(){const r=yield this.apkAnalyser.analyse(e,i);const f=yield this.apkAnalyser.analyse(t,s);const a=new o.default;a.baseApkLabel=r.apkLabel;a.targetApkLabel=f.apkLabel;u.forEach((e,t)=>{const n=r.sizeMetrics[e];const i=r.sizeMetrics[e];const o=i-n;a.comparisionMetrics.push({metricName:e,baseValue:n,targetValue:i,difference:o,threshold:c[t]})});this.reporter.writeReport(a,n);return a})}}t.default=ComparisionReportGenerator},622:function(e){e.exports=require("path")},633:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});class ThresholdChecker{constructor(e){this.ciCore=e}checkThresholds(e){var t=true;e.comparisionMetrics.forEach(e=>{if(e.threshold==NaN){this.ciCore.logInfo(e.metricName+": ignoring threshold for metric!");return}if(e.difference>e.threshold){this.ciCore.logError(e.metricName+" increased more than threshold!");t=false}});return t}}t.default=ThresholdChecker},669:function(e){e.exports=require("util")},708:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(Object.hasOwnProperty.call(e,n))t[n]=e[n];t["default"]=e;return t};Object.defineProperty(t,"__esModule",{value:true});const i=r(n(747));const o=r(n(669));class FilesSizeCalculator{getFilesSize(e){var t=0;if(!o.isNullOrUndefined(e)){e.forEach(e=>{t+=this.getFileSize(e)})}return t}getFileSize(e){const t=i.statSync(e);return t["size"]}}t.FilesSizeCalculator=FilesSizeCalculator},718:function(e,t,n){var r=n(519).require(),i=n(622);r.existsSync=r.existsSync||i.existsSync;e.exports=function(e){var t=e||"",n=0,o=newAttr(),s=null;function newAttr(){return{directory:false,readonly:false,hidden:false,executable:false,mtime:0,atime:0}}if(t&&r.existsSync(t)){s=r.statSync(t);o.directory=s.isDirectory();o.mtime=s.mtime;o.atime=s.atime;o.executable=!!(1&parseInt((s.mode&parseInt("777",8)).toString(8)[0]));o.readonly=!!(2&parseInt((s.mode&parseInt("777",8)).toString(8)[0]));o.hidden=i.basename(t)[0]==="."}else{console.warn("Invalid path: "+t)}return{get directory(){return o.directory},get readOnly(){return o.readonly},get hidden(){return o.hidden},get mtime(){return o.mtime},get atime(){return o.atime},get executable(){return o.executable},decodeAttributes:function(e){},encodeAttributes:function(e){},toString:function(){return"{\n"+'\t"path" : "'+t+",\n"+'\t"isDirectory" : '+o.directory+",\n"+'\t"isReadOnly" : '+o.readonly+",\n"+'\t"isHidden" : '+o.hidden+",\n"+'\t"isExecutable" : '+o.executable+",\n"+'\t"mTime" : '+o.mtime+"\n"+'\t"aTime" : '+o.atime+"\n"+"}"}}}},747:function(e){e.exports=require("fs")},761:function(e){e.exports=require("zlib")},771:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});class ComparisionReport{constructor(){this.baseApkLabel="";this.targetApkLabel="";this.comparisionMetrics=[]}}t.default=ComparisionReport},799:function(e){e.exports={INVALID_LOC:"Invalid LOC header (bad signature)",INVALID_CEN:"Invalid CEN header (bad signature)",INVALID_END:"Invalid END header (bad signature)",NO_DATA:"Nothing to decompress",BAD_CRC:"CRC32 checksum failed",FILE_IN_THE_WAY:"There is a file in the way: %s",UNKNOWN_METHOD:"Invalid/unsupported compression method",AVAIL_DATA:"inflate::Available inflate data did not terminate",INVALID_DISTANCE:"inflate::Invalid literal/length or distance code in fixed or dynamic block",TO_MANY_CODES:"inflate::Dynamic block code description: too many length or distance codes",INVALID_REPEAT_LEN:"inflate::Dynamic block code description: repeat more than specified lengths",INVALID_REPEAT_FIRST:"inflate::Dynamic block code description: repeat lengths with no first length",INCOMPLETE_CODES:"inflate::Dynamic block code description: code lengths codes incomplete",INVALID_DYN_DISTANCE:"inflate::Dynamic block code description: invalid distance code lengths",INVALID_CODES_LEN:"inflate::Dynamic block code description: invalid literal/length code lengths",INVALID_STORE_BLOCK:"inflate::Stored block length did not match one's complement",INVALID_BLOCK_TYPE:"inflate::Invalid block type (type == 3)",CANT_EXTRACT_FILE:"Could not extract the file",CANT_OVERRIDE:"Target file already exists",NO_ZIP:"No zip file was loaded",NO_ENTRY:"Entry doesn't exist",DIRECTORY_CONTENT_ERROR:"A directory cannot have content",FILE_NOT_FOUND:"File not found: %s",NOT_IMPLEMENTED:"Not implemented",INVALID_FILENAME:"Invalid filename",INVALID_FORMAT:"Invalid or unsupported zip format. No END header found"}},802:function(e,t,n){var r=n(967),i=n(864),o=n(402);e.exports=function(e,t){var n=[],s={},u=Buffer.alloc(0),c="",f=o.FileSystem.require(),a=null,l=new i.MainHeader;if(t===o.Constants.FILE){c=e;a=f.readFileSync(c);readMainHeader()}else if(t===o.Constants.BUFFER){a=e;readMainHeader()}else{}function readEntries(){s={};n=new Array(l.diskEntries);var e=l.offset;for(var t=0;t<n.length;t++){var i=e,u=new r(a);u.header=a.slice(i,i+=o.Constants.CENHDR);u.entryName=a.slice(i,i+=u.header.fileNameLength);if(u.header.extraLength){u.extra=a.slice(i,i+=u.header.extraLength)}if(u.header.commentLength)u.comment=a.slice(i,i+u.header.commentLength);e+=u.header.entryHeaderSize;n[t]=u;s[u.entryName]=u}}function readMainHeader(){var e=a.length-o.Constants.ENDHDR,t=Math.max(0,e-65535),n=-1;for(e;e>=t;e--){if(a[e]!==80)continue;if(a.readUInt32LE(e)===o.Constants.ENDSIG){n=e;break}}if(!~n)throw o.Errors.INVALID_FORMAT;l.loadFromBinary(a.slice(n,n+o.Constants.ENDHDR));if(l.commentLength){u=a.slice(n+o.Constants.ENDHDR)}readEntries()}return{get entries(){return n},get comment(){return u.toString()},set comment(e){l.commentLength=e.length;u=e},getEntry:function(e){return s[e]||null},setEntry:function(e){n.push(e);s[e.entryName]=e;l.totalEntries=n.length},deleteEntry:function(e){var t=s[e];if(t&&t.isDirectory){var r=this;this.getEntryChildren(t).forEach(function(t){if(t.entryName!==e){r.deleteEntry(t.entryName)}})}n.splice(n.indexOf(t),1);delete s[e];l.totalEntries=n.length},getEntryChildren:function(e){if(e.isDirectory){var t=[],r=e.entryName,i=r.length;n.forEach(function(e){if(e.entryName.substr(0,i)===r){t.push(e)}});return t}return[]},compressToBuffer:function(){if(n.length>1){n.sort(function(e,t){var n=e.entryName.toLowerCase();var r=t.entryName.toLowerCase();if(n<r){return-1}if(n>r){return 1}return 0})}var e=0,t=[],r=[],i=0;l.size=0;l.offset=0;n.forEach(function(n){var o=n.getCompressedData();n.header.offset=i;var s=n.header.dataHeaderToBinary();var u=n.rawEntryName.length;var c=n.extra.toString();var f=Buffer.alloc(u+c.length);n.rawEntryName.copy(f,0);f.fill(c,u);var a=s.length+f.length+o.length;i+=a;t.push(s);t.push(f);t.push(o);var E=n.packHeader();r.push(E);l.size+=E.length;e+=a+E.length});e+=l.mainHeaderSize;l.offset=i;i=0;var s=Buffer.alloc(e);t.forEach(function(e){e.copy(s,i);i+=e.length});r.forEach(function(e){e.copy(s,i);i+=e.length});var c=l.toBinary();if(u){u.copy(c,o.Constants.ENDHDR)}c.copy(s,i);return s},toAsyncBuffer:function(e,t,r,i){if(n.length>1){n.sort(function(e,t){var n=e.entryName.toLowerCase();var r=t.entryName.toLowerCase();if(n>r){return-1}if(n<r){return 1}return 0})}var s=0,c=[],f=[],a=0;l.size=0;l.offset=0;var E=function(t){var n=arguments.callee;if(t.length){var E=t.pop();var d=E.entryName+E.extra.toString();if(r)r(d);E.getCompressedDataAsync(function(r){if(i)i(d);E.header.offset=a;var h=E.header.dataHeaderToBinary();var g;try{g=Buffer.alloc(d.length,d)}catch(e){g=new Buffer(d)}var m=h.length+g.length+r.length;a+=m;c.push(h);c.push(g);c.push(r);var C=E.packHeader();f.push(C);l.size+=C.length;s+=m+C.length;if(t.length){n(t)}else{s+=l.mainHeaderSize;l.offset=a;a=0;var y=Buffer.alloc(s);c.forEach(function(e){e.copy(y,a);a+=e.length});f.forEach(function(e){e.copy(y,a);a+=e.length});var L=l.toBinary();if(u){u.copy(L,o.Constants.ENDHDR)}L.copy(y,a);e(y)}})}};E(n)}}}},818:function(e,t,n){t.Deflater=n(4);t.Inflater=n(566)},860:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});const i=r(n(285));(new i.default).run()},864:function(e,t,n){t.EntryHeader=n(899);t.MainHeader=n(543)},899:function(e,t,n){var r=n(402),i=r.Constants;e.exports=function(){var e=10,t=10,n=0,o=0,s=0,u=0,c=0,f=0,a=0,l=0,E=0,d=0,h=0,g=0,m=0;var C={};function setTime(e){e=new Date(e);s=(e.getFullYear()-1980&127)<<25|e.getMonth()+1<<21|e.getDate()<<16|e.getHours()<<11|e.getMinutes()<<5|e.getSeconds()>>1}setTime(+new Date);return{get made(){return e},set made(t){e=t},get version(){return t},set version(e){t=e},get flags(){return n},set flags(e){n=e},get method(){return o},set method(e){o=e},get time(){return new Date((s>>25&127)+1980,(s>>21&15)-1,s>>16&31,s>>11&31,s>>5&63,(s&31)<<1)},set time(e){setTime(e)},get crc(){return u},set crc(e){u=e},get compressedSize(){return c},set compressedSize(e){c=e},get size(){return f},set size(e){f=e},get fileNameLength(){return a},set fileNameLength(e){a=e},get extraLength(){return l},set extraLength(e){l=e},get commentLength(){return E},set commentLength(e){E=e},get diskNumStart(){return d},set diskNumStart(e){d=e},get inAttr(){return h},set inAttr(e){h=e},get attr(){return g},set attr(e){g=e},get offset(){return m},set offset(e){m=e},get encripted(){return(n&1)===1},get entryHeaderSize(){return i.CENHDR+a+l+E},get realDataOffset(){return m+i.LOCHDR+C.fnameLen+C.extraLen},get dataHeader(){return C},loadDataHeaderFromBinary:function(e){var t=e.slice(m,m+i.LOCHDR);if(t.readUInt32LE(0)!==i.LOCSIG){throw r.Errors.INVALID_LOC}C={version:t.readUInt16LE(i.LOCVER),flags:t.readUInt16LE(i.LOCFLG),method:t.readUInt16LE(i.LOCHOW),time:t.readUInt32LE(i.LOCTIM),crc:t.readUInt32LE(i.LOCCRC),compressedSize:t.readUInt32LE(i.LOCSIZ),size:t.readUInt32LE(i.LOCLEN),fnameLen:t.readUInt16LE(i.LOCNAM),extraLen:t.readUInt16LE(i.LOCEXT)}},loadFromBinary:function(C){if(C.length!==i.CENHDR||C.readUInt32LE(0)!==i.CENSIG){throw r.Errors.INVALID_CEN}e=C.readUInt16LE(i.CENVEM);t=C.readUInt16LE(i.CENVER);n=C.readUInt16LE(i.CENFLG);o=C.readUInt16LE(i.CENHOW);s=C.readUInt32LE(i.CENTIM);u=C.readUInt32LE(i.CENCRC);c=C.readUInt32LE(i.CENSIZ);f=C.readUInt32LE(i.CENLEN);a=C.readUInt16LE(i.CENNAM);l=C.readUInt16LE(i.CENEXT);E=C.readUInt16LE(i.CENCOM);d=C.readUInt16LE(i.CENDSK);h=C.readUInt16LE(i.CENATT);g=C.readUInt32LE(i.CENATX);m=C.readUInt32LE(i.CENOFF)},dataHeaderToBinary:function(){var e=Buffer.alloc(i.LOCHDR);e.writeUInt32LE(i.LOCSIG,0);e.writeUInt16LE(t,i.LOCVER);e.writeUInt16LE(n,i.LOCFLG);e.writeUInt16LE(o,i.LOCHOW);e.writeUInt32LE(s,i.LOCTIM);e.writeUInt32LE(u,i.LOCCRC);e.writeUInt32LE(c,i.LOCSIZ);e.writeUInt32LE(f,i.LOCLEN);e.writeUInt16LE(a,i.LOCNAM);e.writeUInt16LE(l,i.LOCEXT);return e},entryHeaderToBinary:function(){var r=Buffer.alloc(i.CENHDR+a+l+E);r.writeUInt32LE(i.CENSIG,0);r.writeUInt16LE(e,i.CENVEM);r.writeUInt16LE(t,i.CENVER);r.writeUInt16LE(n,i.CENFLG);r.writeUInt16LE(o,i.CENHOW);r.writeUInt32LE(s,i.CENTIM);r.writeInt32LE(u&65535,i.CENCRC,true);r.writeUInt32LE(c,i.CENSIZ);r.writeUInt32LE(f,i.CENLEN);r.writeUInt16LE(a,i.CENNAM);r.writeUInt16LE(l,i.CENEXT);r.writeUInt16LE(E,i.CENCOM);r.writeUInt16LE(d,i.CENDSK);r.writeUInt16LE(h,i.CENATT);r.writeUInt32LE(g,i.CENATX);r.writeUInt32LE(m,i.CENOFF);r.fill(0,i.CENHDR);return r},toString:function(){return"{\n"+'\t"made" : '+e+",\n"+'\t"version" : '+t+",\n"+'\t"flags" : '+n+",\n"+'\t"method" : '+r.methodToString(o)+",\n"+'\t"time" : '+this.time+",\n"+'\t"crc" : 0x'+u.toString(16).toUpperCase()+",\n"+'\t"compressedSize" : '+c+" bytes,\n"+'\t"size" : '+f+" bytes,\n"+'\t"fileNameLength" : '+a+",\n"+'\t"extraLength" : '+l+" bytes,\n"+'\t"commentLength" : '+E+" bytes,\n"+'\t"diskNumStart" : '+d+",\n"+'\t"inAttr" : '+h+",\n"+'\t"attr" : '+g+",\n"+'\t"offset" : '+m+",\n"+'\t"entryHeaderSize" : '+(i.CENHDR+a+l+E)+" bytes\n"+"}"}}}},916:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function fulfilled(e){try{step(r.next(e))}catch(e){o(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())})};var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};var o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(Object.hasOwnProperty.call(e,n))t[n]=e[n];t["default"]=e;return t};Object.defineProperty(t,"__esModule",{value:true});const s=i(n(208));const u=o(n(622));const c=o(n(669));const f=i(n(227));const a=i(n(571));const l=n(708);class ApkAnalyzer{analyse(e,t,n){return r(this,void 0,void 0,function*(){if(c.isUndefined(n)){n=u.join(u.dirname(e),"extracted")}const r=new s.default(e);console.log("Extracting APK file to "+n);r.extractAllTo(n,true);const i=new f.default(n);yield i.parse();const o=new l.FilesSizeCalculator;const E=new a.default;E.apkLabel=t;E.sizeMetrics["apkSize"]=o.getFileSize(e);E.sizeMetrics["arscFile"]=o.getFilesSize(i.getFiles(".arsc"));E.sizeMetrics["dexFiles"]=o.getFilesSize(i.getFiles(".dex"));E.sizeMetrics["nativeLibs"]=o.getFilesSize(i.getFiles(".so"));E.sizeMetrics["installSize"]=E.sizeMetrics["apkSize"]+E.sizeMetrics["dexFiles"];return E})}}t.default=ApkAnalyzer},967:function(e,t,n){var r=n(402),i=n(864),o=r.Constants,s=n(818);e.exports=function(e){var t=new i.EntryHeader,n=Buffer.alloc(0),u=Buffer.alloc(0),c=false,f=null,a=Buffer.alloc(0);function getCompressedDataFromZip(){if(!e||!Buffer.isBuffer(e)){return Buffer.alloc(0)}t.loadDataHeaderFromBinary(e);return e.slice(t.realDataOffset,t.realDataOffset+t.compressedSize)}function crc32OK(e){if((t.flags&8)!==8){if(r.crc32(e)!==t.dataHeader.crc){return false}}else{}return true}function decompress(e,i,o){if(typeof i==="undefined"&&typeof e==="string"){o=e;e=void 0}if(c){if(e&&i){i(Buffer.alloc(0),r.Errors.DIRECTORY_CONTENT_ERROR)}return Buffer.alloc(0)}var u=getCompressedDataFromZip();if(u.length===0){if(e&&i)i(u,r.Errors.NO_DATA);return u}var f=Buffer.alloc(t.size);switch(t.method){case r.Constants.STORED:u.copy(f);if(!crc32OK(f)){if(e&&i)i(f,r.Errors.BAD_CRC);return r.Errors.BAD_CRC}else{if(e&&i)i(f);return f}case r.Constants.DEFLATED:var a=new s.Inflater(u);if(!e){var l=a.inflate(f);l.copy(f,0);if(!crc32OK(f)){console.warn(r.Errors.BAD_CRC+" "+n.toString())}return f}else{a.inflateAsync(function(e){e.copy(f,0);if(!crc32OK(f)){if(i)i(f,r.Errors.BAD_CRC)}else{if(i)i(f)}})}break;default:if(e&&i)i(Buffer.alloc(0),r.Errors.UNKNOWN_METHOD);return r.Errors.UNKNOWN_METHOD}}function compress(n,i){if((!f||!f.length)&&Buffer.isBuffer(e)){if(n&&i)i(getCompressedDataFromZip());return getCompressedDataFromZip()}if(f.length&&!c){var o;switch(t.method){case r.Constants.STORED:t.compressedSize=t.size;o=Buffer.alloc(f.length);f.copy(o);if(n&&i)i(o);return o;default:case r.Constants.DEFLATED:var u=new s.Deflater(f);if(!n){var a=u.deflate();t.compressedSize=a.length;return a}else{u.deflateAsync(function(e){o=Buffer.alloc(e.length);t.compressedSize=e.length;e.copy(o);i&&i(o)})}u=null;break}}else{if(n&&i){i(Buffer.alloc(0))}else{return Buffer.alloc(0)}}}function readUInt64LE(e,t){return(e.readUInt32LE(t+4)<<4)+e.readUInt32LE(t)}function parseExtra(e){var t=0;var n,r,i;while(t<e.length){n=e.readUInt16LE(t);t+=2;r=e.readUInt16LE(t);t+=2;i=e.slice(t,t+r);t+=r;if(o.ID_ZIP64===n){parseZip64ExtendedInformation(i)}}}function parseZip64ExtendedInformation(e){var n,r,i,s;if(e.length>=o.EF_ZIP64_SCOMP){n=readUInt64LE(e,o.EF_ZIP64_SUNCOMP);if(t.size===o.EF_ZIP64_OR_32){t.size=n}}if(e.length>=o.EF_ZIP64_RHO){r=readUInt64LE(e,o.EF_ZIP64_SCOMP);if(t.compressedSize===o.EF_ZIP64_OR_32){t.compressedSize=r}}if(e.length>=o.EF_ZIP64_DSN){i=readUInt64LE(e,o.EF_ZIP64_RHO);if(t.offset===o.EF_ZIP64_OR_32){t.offset=i}}if(e.length>=o.EF_ZIP64_DSN+4){s=e.readUInt32LE(o.EF_ZIP64_DSN);if(t.diskNumStart===o.EF_ZIP64_OR_16){t.diskNumStart=s}}}return{get entryName(){return n.toString()},get rawEntryName(){return n},set entryName(e){n=r.toBuffer(e);var i=n[n.length-1];c=i===47||i===92;t.fileNameLength=n.length},get extra(){return a},set extra(e){a=e;t.extraLength=e.length;parseExtra(e)},get comment(){return u.toString()},set comment(e){u=r.toBuffer(e);t.commentLength=u.length},get name(){var e=n.toString();return c?e.substr(e.length-1).split("/").pop():e.split("/").pop()},get isDirectory(){return c},getCompressedData:function(){return compress(false,null)},getCompressedDataAsync:function(e){compress(true,e)},setData:function(e){f=r.toBuffer(e);if(!c&&f.length){t.size=f.length;t.method=r.Constants.DEFLATED;t.crc=r.crc32(e);t.changed=true}else{t.method=r.Constants.STORED}},getData:function(e){if(t.changed){return f}else{return decompress(false,null,e)}},getDataAsync:function(e,n){if(t.changed){e(f)}else{decompress(true,e,n)}},set attr(e){t.attr=e},get attr(){return t.attr},set header(e){t.loadFromBinary(e)},get header(){return t},packHeader:function(){var e=t.entryHeaderToBinary();n.copy(e,r.Constants.CENHDR);if(t.extraLength){a.copy(e,r.Constants.CENHDR+n.length)}if(t.commentLength){u.copy(e,r.Constants.CENHDR+n.length+t.extraLength,u.length)}return e},toString:function(){return"{\n"+'\t"entryName" : "'+n.toString()+'",\n'+'\t"name" : "'+(c?n.toString().replace(/\/$/,"").split("/").pop():n.toString().split("/").pop())+'",\n'+'\t"comment" : "'+u.toString()+'",\n'+'\t"isDirectory" : '+c+",\n"+'\t"header" : '+t.toString().replace(/\t/gm,"\t\t").replace(/}/gm,"\t}")+",\n"+'\t"compressedData" : <'+(e&&e.length+" bytes buffer"||"null")+">\n"+'\t"data" : <'+(f&&f.length+" bytes buffer"||"null")+">\n"+"}"}}}},997:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});const r=n(87);function issueCommand(e,t,n){const i=new Command(e,t,n);process.stdout.write(i.toString()+r.EOL)}t.issueCommand=issueCommand;function issue(e,t=""){issueCommand(e,{},t)}t.issue=issue;const i="::";class Command{constructor(e,t,n){if(!e){e="missing.command"}this.command=e;this.properties=t;this.message=n}toString(){let e=i+this.command;if(this.properties&&Object.keys(this.properties).length>0){e+=" ";for(const t in this.properties){if(this.properties.hasOwnProperty(t)){const n=this.properties[t];if(n){e+=`${t}=${escape(`${n||""}`)},`}}}}e+=i;const t=`${this.message||""}`;e+=escapeData(t);return e}}function escapeData(e){return e.replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function escape(e){return e.replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/]/g,"%5D").replace(/;/g,"%3B")}}});